+++
title = "pnpm å°æ±º npmï¼šé–‹ç™¼è€…å¿…çŸ¥çš„äº”å¤§å„ªå‹¢"
description = "æƒ³æå‡å°ˆæ¡ˆæ•ˆèƒ½ä¸¦ç¯€çœç£ç¢Ÿç©ºé–“å—ï¼Ÿpnpm å¸¶ä¾†æ›´åš´è¬¹çš„ä¾è³´ç®¡ç†èˆ‡å¼·å¤§å·¥ä½œå€æ”¯æ´ã€‚æ·±å…¥äº†è§£ pnpm å¦‚ä½•æ”¹è®Šä½ çš„é–‹ç™¼æµç¨‹ï¼"
date = "2025-05-22T16:21:28Z"
updated = "2025-07-27T17:00:58Z"
draft = false

[taxonomies]
tags = [ "npm", "pnpm", "Package Manager" ]
providers = [ "Felo Search" ]
licenses = [ "GFDL 1.3" ]

[extra]
withAI = "<https://felo.ai/search/8nbwQkvM9Lv46q3MptvAG5?invite=dOLYGeJyZJqVX>"
+++
{% alert(edit=true) %}
æˆ‘æœ€å–œæ­¡å•é€™ç¨®ã€Œwhy A over Bã€çš„å•é¡Œäº† ğŸ˜
{% end %}

{% chat(speaker="jim") %}
why should I use pnpm instead of npm?
{% end %}

{% chat(speaker="felo") %}
ç‚ºä»€éº¼æ‡‰è©²ä½¿ç”¨ pnpm è€Œé npmï¼Ÿ
{% end %}

## æ•ˆèƒ½å„ªå‹¢

pnpmï¼ˆPerformant NPMï¼‰æ˜¯ä¸€å€‹æ¯” npm æ›´é«˜æ•ˆçš„å¥—ä»¶ç®¡ç†å·¥å…·ã€‚å®ƒçš„å®‰è£é€Ÿåº¦æ˜é¡¯å¿«æ–¼ npmï¼Œç‰¹åˆ¥æ˜¯åœ¨è™•ç†å¤§å‹å°ˆæ¡ˆæ™‚ï¼Œpnpm çš„è¡¨ç¾å¯ä»¥é”åˆ°æ¯” npm å¿« 3 å€çš„æ•ˆèƒ½[^7]ã€‚é€™ä¸»è¦æ­¸åŠŸæ–¼ pnpm ç¨ç‰¹çš„ä¾è³´é …ç®¡ç†æ–¹å¼å’Œå¿«å–ç­–ç•¥[^2][^6]ã€‚

## ç£ç¢Ÿç©ºé–“ä½¿ç”¨æ•ˆç‡

pnpm æ¡ç”¨äº†ä¸€ç¨®ç¨ç‰¹çš„ä¾è³´é …ç®¡ç†æ–¹æ³•ï¼Œå®ƒä¸æœƒç‚ºæ¯å€‹å°ˆæ¡ˆå‰µå»ºå–®ç¨çš„å¥—ä»¶å‰¯æœ¬ï¼Œè€Œæ˜¯å°‡æ‰€æœ‰å¥—ä»¶å­˜å„²åœ¨å…¨å±€çš„å…§å®¹å¯å°‹å€å­˜å„²ä¸­ï¼Œä¸¦åœ¨å°ˆæ¡ˆç›®éŒ„ä¸­å‰µå»ºç¬¦è™Ÿé€£çµ[^2]ã€‚é€™ç¨®æ–¹æ³•å¤§å¹…æ¸›å°‘äº†é‡è¤‡æ€§ï¼Œç¯€çœäº†å¤§é‡ç£ç¢Ÿç©ºé–“[^4][^5]ã€‚

å…·é«”ä¾†èªªï¼Œpnpm ä½¿ç”¨ã€Œç¡¬é€£çµã€ï¼ˆhard linkingï¼‰æŠ€è¡“å°‡å¥—ä»¶å­˜å„²åœ¨å…¨å±€å€‰åº«ä¸­ï¼Œç•¶ä½ ä¸‹è¼‰ä¸€å€‹ä¾è³´é …æ™‚ï¼Œpnpm æœƒå…ˆæª¢æŸ¥è©²ä¾è³´é …æ˜¯å¦å·²å­˜åœ¨æ–¼å…¨å±€å€‰åº«ä¸­ï¼Œå¦‚æœæ‰¾åˆ°äº†ï¼Œpnpm å°±æœƒé€šéå‰µå»ºç¡¬é€£çµä¾†ç²å–å®ƒï¼Œè€Œä¸æ˜¯é‡æ–°ä¸‹è¼‰[^5][^6]ã€‚

## æ›´åš´æ ¼çš„ä¾è³´è§£æ

pnpm å¯¦æ–½äº†æ›´åš´æ ¼çš„ä¾è³´è§£ææ©Ÿåˆ¶ï¼Œé€™æœ‰åŠ©æ–¼é˜²æ­¢ç”±ç‰ˆæœ¬ä¸åŒ¹é…å¼•èµ·çš„å•é¡Œ[^2]ã€‚èˆ‡ npm ä½¿ç”¨çš„æ‰å¹³åŒ– node_modules çµæ§‹ä¸åŒï¼Œpnpm çš„ä¾è³´æ¨¹ç®—æ³•æ›´ç°¡å–®ï¼Œå¯¦ç¾å’Œç¶­è­·èµ·ä¾†æ›´å®¹æ˜“ï¼Œéœ€è¦çš„è¨ˆç®—é‡ä¹Ÿæ›´å°‘[^7]ã€‚

npm çš„æ‰å¹³åŒ–ä¾è³´æ¨¹æœƒå°è‡´ä¸€äº›å•é¡Œï¼š

1. æ‰å¹³åŒ–ä¾è³´æ¨¹çš„ç®—æ³•è¤‡é›œ
2. æŸäº›å¥—ä»¶å¿…é ˆåœ¨å¦ä¸€å€‹å°ˆæ¡ˆçš„ `node_modules` æ–‡ä»¶å¤¾ä¸­é‡è¤‡
3. æ¨¡çµ„å¯ä»¥è¨ªå•å®ƒå€‘ä¸¦ä¸ä¾è³´çš„å¥—ä»¶[^6][^7]

## å·¥ä½œå€æ”¯æ´

pnpm å…§å»ºæ”¯æ´ç®¡ç†å–®ä¸€å„²å­˜åº«ä¸­çš„å¤šå€‹å¥—ä»¶ï¼ˆmonorepoï¼‰ï¼Œé€™å°æ–¼ç®¡ç†ç›¸äº’ä¾è³´çš„å¥—ä»¶æˆ–å¾®æœå‹™çš„å°ˆæ¡ˆéå¸¸æœ‰ç”¨[^2][^6]ã€‚å®ƒä½¿ç”¨ `pnpm-workspace.yaml` æ–‡ä»¶é€²è¡Œæ›´éˆæ´»çš„å·¥ä½œå€å®šç¾©ï¼Œè€Œ npm å‰‡ä½¿ç”¨ package.json ä¸­çš„ workspaces å­—æ®µ[^5]ã€‚

## æ˜“æ–¼ä¿®è£œä¾è³´

pnpm å…è¨±ä½ æ¯” npm æ›´å®¹æ˜“åœ°ã€Œä¿®è£œã€ï¼ˆpatchï¼‰ä½ çš„ä¾è³´é …ï¼Œé€™æ˜¯ pnpm çš„ä¸€å€‹ç¶“å¸¸è¢«ä½ä¼°çš„å„ªå‹¢[^1]ã€‚

## ä½¿ç”¨å»ºè­°

å¦‚æœä½ è€ƒæ…®å¾ npm åˆ‡æ›åˆ° pnpmï¼Œéœ€è¦æ³¨æ„ä»¥ä¸‹å¹¾é»ï¼š

1. pnpm ä½¿ç”¨è‡ªå·±çš„é–å®šæ–‡ä»¶ï¼ˆpnpm-lock.yamlï¼‰ï¼Œè€Œ npm ä½¿ç”¨ package-lock.json[^8]ã€‚
2. åœ¨åœ˜éšŠä¸­å·¥ä½œæ™‚ï¼Œæœ€å¥½æ‰€æœ‰é–‹ç™¼è€…ä½¿ç”¨ç›¸åŒçš„å¥—ä»¶ç®¡ç†å™¨ï¼Œå¦å‰‡å¯èƒ½æœƒé‡åˆ°å•é¡Œ[^8]ã€‚
3. å¯ä»¥ä½¿ç”¨ `pnpm import` å‘½ä»¤å°‡ lockfile.json è½‰æ›ç‚º pnpm-lock.yaml[^8]ã€‚

## çµè«–

pnpm æ˜¯ npm çš„ã€Œé«˜æ•ˆèƒ½ã€ç‰ˆæœ¬ï¼Œå®ƒä¿ç•™äº† npm çš„æ‰€æœ‰å„ªé»ï¼ŒåŒæ™‚è§£æ±ºäº†å…¶å¼±é»ã€‚å¾åŸºæº–æ¸¬è©¦çµæœä¾†çœ‹ï¼Œpnpm åœ¨æ•´é«”è¡¨ç¾ä¸Šæ˜é¡¯å„ªæ–¼ npm å’Œ yarn[^6]ã€‚é€™å°±æ˜¯ç‚ºä»€éº¼åƒ Vue3ã€Prism å’Œå¾®è»Ÿç­‰å¤§å‹ç§‘æŠ€å…¬å¸æ­£åœ¨è¿…é€Ÿæ¡ç”¨ pnpm çš„åŸå› [^6]ã€‚

å¦‚æœä½ æ­£åœ¨å°‹æ‰¾ä¸€å€‹æ›´å¿«ã€æ›´ç¯€çœç£ç¢Ÿç©ºé–“ä¸”ä¾è³´ç®¡ç†æ›´åš´æ ¼çš„å¥—ä»¶ç®¡ç†å™¨ï¼Œpnpm æ˜¯ä¸€å€‹å€¼å¾—è€ƒæ…®çš„é¸æ“‡ã€‚ç„¡è«–ä½ æ˜¯ç¨ç«‹é–‹ç™¼è€…é‚„æ˜¯å¤§å‹åœ˜éšŠçš„ä¸€å“¡ï¼Œæ¢ç´¢ pnpm éƒ½å¯èƒ½å°å„ªåŒ–ä½ çš„ Node.js é–‹ç™¼å·¥ä½œæµç¨‹æœ‰æ‰€å¹«åŠ©[^5]ã€‚

[^1]: [Are you using npm or pnpm? : r/webdev - Reddit](https://www.reddit.com/r/webdev/comments/1ijwpg0/are_you_using_npm_or_pnpm/)
[^2]: [pnpm vs npm - GeeksforGeeks](https://www.geeksforgeeks.org/pnpm-vs-npm/)
[^4]: [Meet PNPM: The Faster, More Performant NPM | Bits and Pieces](https://blog.bitsrc.io/pnpm-javascript-package-manager-4b5abd59dc9)
[^5]: [What is PNPM and why you should use it? - Peerlist](https://peerlist.io/blog/engineering/what-is-pnpm-and-why-you-should-use-it)
[^6]: [Why you should prefer using pnpm over npm and yarn? | Refine](https://refine.dev/blog/pnpm-vs-npm-and-yarn/)
[^7]: [Choosing the Right Package Manager: NPM, Yarn, or PNPM?](https://hackernoon.com/choosing-the-right-package-manager-npm-yarn-or-pnpm)
[^8]: [Is there any gotcha if I switch from npm to pnpm? And can I ...](https://news.ycombinator.com/item?id=30920152)
